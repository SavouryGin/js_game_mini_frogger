(()=>{var e={407:()=>{!function(){var e={},t=[];function n(n){if(e[n])return e[n];var r=new Image;r.onload=function(){e[n]=r,o()&&t.forEach((function(e){e()}))},e[n]=!1,r.src=n}function o(){var t=!0;for(var n in e)e.hasOwnProperty(n)&&!e[n]&&(t=!1);return t}window.Resources={load:function(e){e instanceof Array?e.forEach((function(e){n(e)})):n(e)},get:function(t){return e[t]},onReady:function(e){t.push(e)},isReady:o}}()}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{"use strict";n(407);var e=101,t=83,o=606,r=405,i=[63,146,229,312],c={37:"left",38:"up",39:"right",40:"down",65:"left",68:"right",87:"up",83:"down",ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",a:"left",d:"right",w:"up",s:"down",ф:"left",в:"right",ц:"up",ы:"down"},a=["../images/content/stone.png","../images/content/water.png","../images/content/grass.png","../images/content/pokeball.png","../images/content/pokemon_1.png","../images/content/pokemon_2.png","../images/content/pokemon_3.png","../images/content/pokemon_4.png","../images/content/pokemon_5.png","../images/content/pokemon_6.png","../images/content/pokemon_7.png","../images/content/pokemon_8.png","../images/content/pokemon_9.png","../images/content/pokemon_10.png","../images/content/pokemon_11.png","../images/content/pokemon_12.png","../images/content/pokemon_13.png","../images/content/pokemon_14.png","../images/content/pokemon_15.png","../images/content/pokemon_16.png","../images/content/pokemon_17.png","../images/content/pokemon_18.png","../images/content/pokemon_19.png","../images/content/pokemon_20.png","../images/content/star.png"],s=["../images/content/water.png","../images/content/stone.png","../images/content/stone.png","../images/content/stone.png","../images/content/stone.png","../images/content/grass.png"];function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var p=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n,this.sprite=o}var t,n,o;return t=e,(n=[{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}}])&&u(t.prototype,n),o&&u(t,o),e}();function f(){return 100+Math.floor(400*Math.random())}function l(e,t){return Math.floor(Math.random()*(t-e+1))+e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=_(e);if(t){var r=_(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(c,e);var t,n,r,i=k(c);function c(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f();return h(this,c),(t=i.call(this,-101,e,"../images/content/pokeball.png")).speed=n,t}return t=c,(n=[{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x+=this.speed*e,this.x>o&&(this.x=-101,this.speed=f(),t>50?this.speed+=50:t>100?this.speed+=100:t>150?this.speed+=150:t>200?this.speed+=200:t>300&&(this.speed+=300))}}])&&y(t.prototype,n),r&&y(t,r),c}(p);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,n,o,i=O(c);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:202,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return w(this,c),i.call(this,e,t,"../images/content/pokemon_1.png")}return t=c,(n=[{key:"resetPosition",value:function(){this.x=202,this.y=r}},{key:"setRandomSkin",value:function(){switch(l(1,20)){case 1:this.sprite="../images/content/pokemon_1.png";break;case 2:this.sprite="../images/content/pokemon_2.png";break;case 3:this.sprite="../images/content/pokemon_3.png";break;case 4:this.sprite="../images/content/pokemon_4.png";break;case 5:this.sprite="../images/content/pokemon_5.png";break;case 6:this.sprite="../images/content/pokemon_6.png";break;case 7:this.sprite="../images/content/pokemon_7.png";break;case 8:this.sprite="../images/content/pokemon_8.png";break;case 9:this.sprite="../images/content/pokemon_9.png";break;case 10:this.sprite="../images/content/pokemon_10.png";break;case 11:this.sprite="../images/content/pokemon_11.png";break;case 12:this.sprite="../images/content/pokemon_12.png";break;case 13:this.sprite="../images/content/pokemon_13.png";break;case 14:this.sprite="../images/content/pokemon_14.png";break;case 15:this.sprite="../images/content/pokemon_15.png";break;case 16:this.sprite="../images/content/pokemon_16.png";break;case 17:this.sprite="../images/content/pokemon_17.png";break;case 18:this.sprite="../images/content/pokemon_18.png";break;case 19:this.sprite="../images/content/pokemon_19.png";break;case 20:this.sprite="../images/content/pokemon_20.png"}}}])&&S(t.prototype,n),o&&S(t,o),c}(p);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(s,n);var o,i,c,a=M(s);function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e*l(0,5),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r-t*l(2,4);return C(this,s),a.call(this,n,o,"../images/content/star.png")}return o=s,(i=[{key:"changePosition",value:function(){this.x=e*l(0,5),this.y=r-t*l(2,4)}}])&&D(o.prototype,i),c&&D(o,c),s}(p);function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.maxScore=parseInt(localStorage.getItem("maxScore"))||0}var t,n,o;return t=e,(n=[{key:"updateMaxScore",value:function(){var e="undefined"!=typeof localStorage;this.score>this.maxScore&&(this.maxScore=this.score,e&&localStorage.setItem("maxScore",this.maxScore))}},{key:"resetScore",value:function(){this.score=0}},{key:"increaseScore",value:function(e){this.score+=e}},{key:"getScore",value:function(){return this.score}},{key:"getMaxScore",value:function(){return this.maxScore}}])&&L(t.prototype,n),o&&L(t,o),e}();function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"score",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"max-score";F(this,e),this.scoreDisplay=document.getElementById(t),this.maxScoreDisplay=document.getElementById(n)}var t,n,o;return t=e,(n=[{key:"setScore",value:function(e,t){this.scoreDisplay.innerText=e,this.maxScoreDisplay.innerText=t}},{key:"updateScore",value:function(e,t){this.scoreDisplay.innerText=e,this.maxScoreDisplay.innerText=t}}])&&U(t.prototype,n),o&&U(t,o),e}();function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"create",value:function(e,t){var n;return"Pokemon"===e?n=new R:"Pokeball"===e?n=new d(t):"Star"===e?n=new B:"Counter"===e?n=new q:"Displayer"===e&&(n=new z),n.type=e,n}}])&&G(t.prototype,n),o&&G(t,o),e}(),J={jump:new Audio("../sounds/jump.wav"),success:new Audio("../sounds/success.wav"),collect:new Audio("../sounds/collect.wav"),failure:new Audio("../sounds/failure.wav")};function K(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(){function n(e,t,o,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._pokeballs=e,this._pokemon=t,this._star=o,this._counter=r,this._displayer=i}var o,r,i;return o=n,(r=[{key:"checkCollisions",value:function(){var e=this;this._pokeballs.forEach((function(t){t.x+80>e._pokemon.x&&t.x-80<e._pokemon.x&&t.y+60>e._pokemon.y&&t.y-60<e._pokemon.y&&(e._pokemon.resetPosition(),e._pokemon.setRandomSkin(),J.failure.play(),e._counter.updateMaxScore(),e._counter.resetScore(),e._displayer.updateScore(e._counter.getScore(),e._counter.getMaxScore()))}))}},{key:"checkCollect",value:function(){this._star.x+80>this._pokemon.x&&this._star.x-80<this._pokemon.x&&this._star.y+60>this._pokemon.y&&this._star.y-60<this._pokemon.y&&(this._star.changePosition(),J.collect.play(),this._counter.increaseScore(3),this._displayer.updateScore(this._counter.getScore(),this._counter.getMaxScore()))}},{key:"handleInput",value:function(n){var o=this;if(!(this._pokemon.y<0)){switch(n){case"left":this._pokemon.x>0?this._pokemon.x-=e:this._pokemon.x-=0,J.jump.play();break;case"right":this._pokemon.x<505?this._pokemon.x+=e:this._pokemon.x+=0,J.jump.play();break;case"up":this._pokemon.y>0?this._pokemon.y-=t:this._pokemon.y-=0,J.jump.play();break;case"down":this._pokemon.y<405?this._pokemon.y+=t:this._pokemon.y+=0,J.jump.play()}this._pokemon.y<0&&setTimeout((function(){o._pokemon.resetPosition(),o._pokemon.setRandomSkin(),o._counter.increaseScore(1),J.success.play(),o._counter.updateMaxScore(),o._displayer.updateScore(o._counter.getScore(),o._counter.getMaxScore())}),600)}}},{key:"getModifier",value:function(){return this._counter.getScore()}}])&&K(o.prototype,r),i&&K(o,i),n}(),Q=!1,V=new H,W=V.create("Pokemon"),X=V.create("Star"),Y=V.create("Counter"),Z=V.create("Displayer"),$=[];i.forEach((function(e){var t=V.create("Pokeball",e);$.push(t)}));var ee=new N($,W,X,Y,Z);Z.setScore(Y.getScore(),Y.getMaxScore()),document.addEventListener("keyup",(function(e){var t=e.key||e.keyCode;ee.handleInput(c[t])})),document.addEventListener("keydown",(function(e){var t=e.key||e.keyCode;" "!==t&&32!==t||(Q=function(e){return!e}(Q))})),function(){var n,r=document.getElementById("game-container"),i=document.createElement("canvas"),c=i.getContext("2d");function u(){var o=Date.now();Q||(function(e){(function(e){$.forEach((function(t){t.update(e,ee.getModifier())}))})(e),ee.checkCollisions(),ee.checkCollect()}((o-n)/1e3),function(){var n,o;for(c.clearRect(0,0,i.width,i.height),n=0;n<6;n++)for(o=0;o<6;o++)c.drawImage(Resources.get(s[n]),o*e,n*t);$.forEach((function(e){e.render()})),W.render(),X.render()}()),n=o,window.requestAnimationFrame(u)}i.width=o,i.height=606,r.appendChild(i),Resources.load(a),Resources.onReady((function(){n=Date.now(),u()})),window.ctx=c}()})()})();